import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:vulnerability_management/Controllers/service_controller.dart';
import 'package:vulnerability_management/UI/Components/constants.dart';

class AddRepoWidget extends StatelessWidget {
  final emailController = TextEditingController();
  final ServiceController serviceController = Get.put(ServiceController());
  final int index;
  AddRepoWidget({Key? key, required this.index}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    emailController.text = serviceController
        .allStageService[serviceController.currentStage()][index].data!;
    return AlertDialog(
      backgroundColor: bgColor,
      title: const Text('Add GitHub repo'),
      content: SizedBox(
        width: MediaQuery.of(context).size.width / 5,
        height: MediaQuery.of(context).size.height / 5,
        child: Card(
          color: Colors.grey.withOpacity(.4),
          shape:
              RoundedRectangleBorder(borderRadius: BorderRadius.circular(18)),
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 8),
            child: TextField(
              controller: emailController,
              style: const TextStyle(color: Colors.white),
              decoration: InputDecoration(
                  hintText: 'https://github.com/repo',
                  labelStyle: TextStyle(color: Colors.grey[300]),
                  border: InputBorder.none),
            ),
          ),
        ),
      ),
      actions: <Widget>[
        TextButton(
          onPressed: () => Navigator.pop(context, 'OK'),
          child: const Text('Cancel'),
        ),
        TextButton(
          onPressed: () {
            serviceController
                .allStageService[serviceController.currentStage()][index]
                .data = emailController.text;
            Navigator.pop(context, 'OK');
          },
          child: const Text('OK'),
        ),
      ],
    );
  }
}
